{"version":3,"sources":["Components/DisplayPersons.js","Components/DisplayFilter.js","Components/Form.js","Components/ErrorDisplay.js","Services/persons.js","Components/App.js","index.js"],"names":["Person","person","name","number","DisplayPersons","persons","deletePerson","map","key","onClick","DisplayFilter","searchString","filter","a","toLowerCase","includes","Form","onSubmit","fields","field","description","value","onChange","type","ErrorDisplay","errorMessage","style","color","border","borderStyle","baseUrl","axios","request","then","data","catch","error","console","log","idPerson","id","post","delete","newNumber","put","App","useState","setPersons","newName","setNewName","setNewNumber","setSearchString","setErrorMessage","deleteEntry","window","confirm","personService","retval","setTimeout","currentPerson","useEffect","event","preventDefault","newPerson","concat","alert","target","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f64c056e.chunk.js","sourcesContent":["import React from 'react'\n\nconst Person = ({person}) => <span>{`${person.name}: ${person.number}`}</span>\nconst DisplayPersons = ({persons,deletePerson}) => {\n    return (\n        <ul>\n            {\n                persons.map(person => {\n                    return (\n                        <li key={person.name}>\n                            <Person person={person}/>\n                            <button onClick={deletePerson(person)}>Remove</button>\n                        </li>\n                    )\n                })\n            }\n        </ul>\n    )\n}\nexport default DisplayPersons","import React from 'react'\n\nimport \"./DisplayPersons\"\nimport DisplayPersons from './DisplayPersons'\n\nconst DisplayFilter = ({persons,searchString,deletePerson}) => (searchString === '' ? <></> : <DisplayPersons persons={persons.filter(a => a.name.toLowerCase().includes(searchString.toLowerCase())) } deletePerson={deletePerson}/>)\nexport default DisplayFilter","import React from 'react'\n\nconst Form = ({onSubmit,fields}) => {\n    return (\n        <form onSubmit={onSubmit}>\n            <div>\n                {fields.map((field) => <p key={field.description}>{field.description}: <input value={field.value} onChange={field.onChange} /></p>)}\n            </div>\n            <div>\n                <button type=\"submit\">add</button>\n            </div>\n        </form>\n    )\n}\n\nexport default Form","import React from 'react'\n\nconst ErrorDisplay =  ({errorMessage}) => {\n    if(errorMessage === null) return <></>\n    return (\n        <p style={{\n            color: 'grey',\n            border: '1px outset red',\n            borderStyle: 'dotted'\n        }}>\n            {errorMessage}\n        </p>\n    )\n}\n\nexport default ErrorDisplay","import axios from 'axios'\n\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    return (\n        axios\n        .request(baseUrl)\n        .then(request => {\n            return request.data\n        })\n        .catch(error => {\n            console.log(\"Error in GET: \",error)\n            return []\n        })\n    )\n}\n\nconst addPerson = (person) => {\n    let idPerson = {...person,id: person.name}\n    return (\n        axios\n        .post(baseUrl,idPerson)\n            .then(request => 0)\n            .catch(error => {\n                console.log(\"Error in POST: \",error)\n                return 1\n            })\n    )\n}\n\nconst updatePerson = (person,newNumber) => {\n    console.log(person,newNumber)\n    return (\n        axios\n            .put(`${baseUrl}/${person.name}`,{...person,number:newNumber})\n            .then(request => 0)\n            .catch(error => {\n                console.log(\"Error in PUT: \",error)\n                return 1\n            })\n    )\n}\nconst deletePerson = (person) => {\n    return (\n        axios\n            .delete(`${baseUrl}/${person.name}`)\n            .then(request => 0)\n            .catch(error => {\n                console.log(\"Error in DELETE: \",error)\n                return 1\n            })\n    )\n}\n\nexport default { getAll, addPerson, deletePerson, updatePerson }","import React, { useState, useEffect } from 'react'\n\nimport './DisplayPersons'\nimport './DisplayFilter'\nimport './Form'\nimport DisplayPersons from './DisplayPersons'\nimport DisplayFilter from './DisplayFilter'\nimport Form from './Form'\nimport ErrorDisplay from './ErrorDisplay'\n\nimport personService from '../Services/persons'\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ searchString, setSearchString ] = useState('')\n  const [ errorMessage, setErrorMessage ] = useState(null)\n  const addEntry = (event) => {\n    event.preventDefault()\n    if(newName === ''){\n      alert(\"You must enter a name\")\n      return\n    } \n    if(persons.map(a => a.name).includes(newName)){\n      if (window.confirm(`The name ${newName} is already present in the phonebook.\\nDo you want to update the number?`)){\n        personService\n          .updatePerson(persons.filter(a => a.name === newName)[0],newNumber)\n          .then(retval => {\n            if(retval !== 0){\n              setErrorMessage(\"An error occured while contacting the server.\\nPlease try again.\")\n              setTimeout(() => {\n                setErrorMessage(null)\n              },3000)\n            }else{\n              setErrorMessage(\"Successfully updated number.\") //Yes, it's not actually an error message. Sue me.\n              setTimeout(() => {\n                setErrorMessage(null)\n              },2000)\n            }\n          })\n        setPersons(persons.map(person => person.name !== newName ? person : {...person,number:newNumber}))\n        setNewName('');\n        setNewNumber('');\n      }\n      return\n    }\n    let newPerson = {name: newName, number: newNumber};\n    personService\n      .addPerson(newPerson)\n      .then(retval => {\n        if(retval !== 0){\n          setErrorMessage(\"An error occured while contacting the server.\\nPlease try again.\")\n              setTimeout(() => {\n                setErrorMessage(null)\n              },3000)\n        }else{\n          setErrorMessage(\"Successfully added entry.\") //Yes, it's not actually an error message. Sue me.\n          setTimeout(() => {\n            setErrorMessage(null)\n          },2000)\n        }\n      })\n    setPersons(persons.concat(newPerson))\n    setNewName('');\n    setNewNumber('');\n  }\n  const deleteEntry = (person) => () => {\n    if(window.confirm(`Really delete ${person.name}?`) !== true) return\n    personService\n      .deletePerson(person)\n      .then(retval => {\n        if(retval !== 0){\n          setErrorMessage(\"An error occured while attempting to delete the entry.\\nThe entry might have already been deleted.\")\n          setTimeout(() => {\n            setErrorMessage(null)\n          },2000)\n        }\n      })\n      setPersons(persons.filter(currentPerson => currentPerson.name !== person.name))\n  }\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n  const handleSearchChange = (event) => {\n    setSearchString(event.target.value)\n  }\n  \n  useEffect(() => {\n    personService\n      .getAll()\n        .then(data => {\n          setPersons(data)\n        })\n  },[])\n\n  return (\n    <div>\n      <ErrorDisplay errorMessage={errorMessage} />\n      <h2>Phonebook</h2>\n      <h3>Add Entry</h3>\n      <Form onSubmit={addEntry} fields={\n        [\n          {description: 'name',value: newName,onChange: handleNameChange},\n          {description: 'number',value: newNumber,onChange: handleNumberChange}\n        ]\n      } />\n      <h3>Search</h3>\n      <input value={searchString} onChange={handleSearchChange}/>\n      <DisplayFilter persons={persons} searchString={searchString} deletePerson={deleteEntry}/>\n      <h3>Numbers</h3>\n      <DisplayPersons persons={persons} deletePerson={deleteEntry}/>\n    </div>\n  )\n}\n\nexport default App","import ReactDOM from 'react-dom'\nimport React from 'react'\n\nimport \"./Components/App\"\nimport App from './Components/App'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}