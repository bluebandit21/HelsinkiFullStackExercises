{"ast":null,"code":"import _objectSpread from\"/Users/plotner/git/HelsinkiFullStackExercises/part3/phonebook-v2/phonebook-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/plotner/git/HelsinkiFullStackExercises/part3/phonebook-v2/phonebook-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import'./DisplayPersons';import'./DisplayFilter';import'./Form';import DisplayPersons from'./DisplayPersons';import DisplayFilter from'./DisplayFilter';import Form from'./Form';import ErrorDisplay from'./ErrorDisplay';import personService from'../Services/persons';var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),searchString=_useState8[0],setSearchString=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),errorMessage=_useState10[0],setErrorMessage=_useState10[1];var addEntry=function addEntry(event){event.preventDefault();if(newName===''){alert(\"You must enter a name\");return;}if(persons.map(function(a){return a.name;}).includes(newName)){if(window.confirm(\"The name \".concat(newName,\" is already present in the phonebook.\\nDo you want to update the number?\"))){personService.updatePerson(persons.filter(function(a){return a.name===newName;})[0],newNumber).then(function(retval){if(retval!==0){setErrorMessage(\"An error occured while contacting the server.\\nPlease try again.\");setTimeout(function(){setErrorMessage(null);},3000);}else{setErrorMessage(\"Successfully updated number.\");//Yes, it's not actually an error message. Sue me.\nsetTimeout(function(){setErrorMessage(null);},2000);}});setPersons(persons.map(function(person){return person.name!==newName?person:_objectSpread({},person,{number:newNumber});}));setNewName('');setNewNumber('');}return;}var newPerson={name:newName,number:newNumber};personService.addPerson(newPerson).then(function(retval){if(retval!==0){setErrorMessage(\"An error occured while contacting the server.\\nPlease try again.\");setTimeout(function(){setErrorMessage(null);},3000);}else{setErrorMessage(\"Successfully added entry.\");//Yes, it's not actually an error message. Sue me.\nsetTimeout(function(){setErrorMessage(null);},2000);}});setPersons(persons.concat(newPerson));setNewName('');setNewNumber('');};var deleteEntry=function deleteEntry(person){return function(){if(window.confirm(\"Really delete \".concat(person.name,\"?\"))!==true)return;personService.deletePerson(person).then(function(retval){if(retval!==0){setErrorMessage(\"An error occured while attempting to delete the entry.\\nThe entry might have already been deleted.\");setTimeout(function(){setErrorMessage(null);},2000);}});setPersons(persons.filter(function(currentPerson){return currentPerson.name!==person.name;}));};};var handleNameChange=function handleNameChange(event){setNewName(event.target.value);};var handleNumberChange=function handleNumberChange(event){setNewNumber(event.target.value);};var handleSearchChange=function handleSearchChange(event){setSearchString(event.target.value);};useEffect(function(){personService.getAll().then(function(data){setPersons(data);});},[]);return React.createElement(\"div\",null,React.createElement(ErrorDisplay,{errorMessage:errorMessage}),React.createElement(\"h2\",null,\"Phonebook\"),React.createElement(\"h3\",null,\"Add Entry\"),React.createElement(Form,{onSubmit:addEntry,fields:[{description:'name',value:newName,onChange:handleNameChange},{description:'number',value:newNumber,onChange:handleNumberChange}]}),React.createElement(\"h3\",null,\"Search\"),React.createElement(\"input\",{value:searchString,onChange:handleSearchChange}),React.createElement(DisplayFilter,{persons:persons,searchString:searchString,deletePerson:deleteEntry}),React.createElement(\"h3\",null,\"Numbers\"),React.createElement(DisplayPersons,{persons:persons,deletePerson:deleteEntry}));};export default App;","map":{"version":3,"sources":["/Users/plotner/git/HelsinkiFullStackExercises/part3/phonebook-v2/phonebook-frontend/src/Components/App.js"],"names":["React","useState","useEffect","DisplayPersons","DisplayFilter","Form","ErrorDisplay","personService","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","searchString","setSearchString","errorMessage","setErrorMessage","addEntry","event","preventDefault","alert","map","a","name","includes","window","confirm","updatePerson","filter","then","retval","setTimeout","person","number","newPerson","addPerson","concat","deleteEntry","deletePerson","currentPerson","handleNameChange","target","value","handleNumberChange","handleSearchChange","getAll","data","description","onChange"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\n\nimport './DisplayPersons'\nimport './DisplayFilter'\nimport './Form'\nimport DisplayPersons from './DisplayPersons'\nimport DisplayFilter from './DisplayFilter'\nimport Form from './Form'\nimport ErrorDisplay from './ErrorDisplay'\n\nimport personService from '../Services/persons'\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ searchString, setSearchString ] = useState('')\n  const [ errorMessage, setErrorMessage ] = useState(null)\n  const addEntry = (event) => {\n    event.preventDefault()\n    if(newName === ''){\n      alert(\"You must enter a name\")\n      return\n    } \n    if(persons.map(a => a.name).includes(newName)){\n      if (window.confirm(`The name ${newName} is already present in the phonebook.\\nDo you want to update the number?`)){\n        personService\n          .updatePerson(persons.filter(a => a.name === newName)[0],newNumber)\n          .then(retval => {\n            if(retval !== 0){\n              setErrorMessage(\"An error occured while contacting the server.\\nPlease try again.\")\n              setTimeout(() => {\n                setErrorMessage(null)\n              },3000)\n            }else{\n              setErrorMessage(\"Successfully updated number.\") //Yes, it's not actually an error message. Sue me.\n              setTimeout(() => {\n                setErrorMessage(null)\n              },2000)\n            }\n          })\n        setPersons(persons.map(person => person.name !== newName ? person : {...person,number:newNumber}))\n        setNewName('');\n        setNewNumber('');\n      }\n      return\n    }\n    let newPerson = {name: newName, number: newNumber};\n    personService\n      .addPerson(newPerson)\n      .then(retval => {\n        if(retval !== 0){\n          setErrorMessage(\"An error occured while contacting the server.\\nPlease try again.\")\n              setTimeout(() => {\n                setErrorMessage(null)\n              },3000)\n        }else{\n          setErrorMessage(\"Successfully added entry.\") //Yes, it's not actually an error message. Sue me.\n          setTimeout(() => {\n            setErrorMessage(null)\n          },2000)\n        }\n      })\n    setPersons(persons.concat(newPerson))\n    setNewName('');\n    setNewNumber('');\n  }\n  const deleteEntry = (person) => () => {\n    if(window.confirm(`Really delete ${person.name}?`) !== true) return\n    personService\n      .deletePerson(person)\n      .then(retval => {\n        if(retval !== 0){\n          setErrorMessage(\"An error occured while attempting to delete the entry.\\nThe entry might have already been deleted.\")\n          setTimeout(() => {\n            setErrorMessage(null)\n          },2000)\n        }\n      })\n      setPersons(persons.filter(currentPerson => currentPerson.name !== person.name))\n  }\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n  const handleSearchChange = (event) => {\n    setSearchString(event.target.value)\n  }\n  \n  useEffect(() => {\n    personService\n      .getAll()\n        .then(data => {\n          setPersons(data)\n        })\n  },[])\n\n  return (\n    <div>\n      <ErrorDisplay errorMessage={errorMessage} />\n      <h2>Phonebook</h2>\n      <h3>Add Entry</h3>\n      <Form onSubmit={addEntry} fields={\n        [\n          {description: 'name',value: newName,onChange: handleNameChange},\n          {description: 'number',value: newNumber,onChange: handleNumberChange}\n        ]\n      } />\n      <h3>Search</h3>\n      <input value={searchString} onChange={handleSearchChange}/>\n      <DisplayFilter persons={persons} searchString={searchString} deletePerson={deleteEntry}/>\n      <h3>Numbers</h3>\n      <DisplayPersons persons={persons} deletePerson={deleteEntry}/>\n    </div>\n  )\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}