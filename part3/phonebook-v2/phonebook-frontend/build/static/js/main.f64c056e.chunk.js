(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},38:function(e,n,t){"use strict";t.r(n);var r=t(14),a=t.n(r),o=t(0),c=t.n(o),u=t(3),l=t(2),i=function(e){var n=e.person;return c.a.createElement("span",null,"".concat(n.name,": ").concat(n.number))},s=function(e){var n=e.persons,t=e.deletePerson;return c.a.createElement("ul",null,n.map((function(e){return c.a.createElement("li",{key:e.name},c.a.createElement(i,{person:e}),c.a.createElement("button",{onClick:t(e)},"Remove"))})))},m=function(e){var n=e.persons,t=e.searchString,r=e.deletePerson;return""===t?c.a.createElement(c.a.Fragment,null):c.a.createElement(s,{persons:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})),deletePerson:r})},f=function(e){var n=e.onSubmit,t=e.fields;return c.a.createElement("form",{onSubmit:n},c.a.createElement("div",null,t.map((function(e){return c.a.createElement("p",{key:e.description},e.description,": ",c.a.createElement("input",{value:e.value,onChange:e.onChange}))}))),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"add")))},d=function(e){var n=e.errorMessage;return null===n?c.a.createElement(c.a.Fragment,null):c.a.createElement("p",{style:{color:"grey",border:"1px outset red",borderStyle:"dotted"}},n)},h=t(4),p=t.n(h),b="/api/persons",E=function(){return p.a.request(b).then((function(e){return e.data})).catch((function(e){return console.log("Error in GET: ",e),[]}))},g=function(e){var n=Object(u.a)({},e,{id:e.name});return p.a.post(b,n).then((function(e){return 0})).catch((function(e){return console.log("Error in POST: ",e),1}))},v=function(e){return p.a.delete("".concat(b,"/").concat(e.name)).then((function(e){return 0})).catch((function(e){return console.log("Error in DELETE: ",e),1}))},y=function(e,n){return console.log(e,n),p.a.put("".concat(b,"/").concat(e.name),Object(u.a)({},e,{number:n})).then((function(e){return 0})).catch((function(e){return console.log("Error in PUT: ",e),1}))},O=function(){var e=Object(o.useState)([]),n=Object(l.a)(e,2),t=n[0],r=n[1],a=Object(o.useState)(""),i=Object(l.a)(a,2),h=i[0],p=i[1],b=Object(o.useState)(""),O=Object(l.a)(b,2),S=O[0],j=O[1],w=Object(o.useState)(""),T=Object(l.a)(w,2),P=T[0],k=T[1],C=Object(o.useState)(null),A=Object(l.a)(C,2),D=A[0],L=A[1],x=function(e){return function(){!0===window.confirm("Really delete ".concat(e.name,"?"))&&(v(e).then((function(e){0!==e&&(L("An error occured while attempting to delete the entry.\nThe entry might have already been deleted."),setTimeout((function(){L(null)}),2e3))})),r(t.filter((function(n){return n.name!==e.name}))))}};return Object(o.useEffect)((function(){E().then((function(e){r(e)}))}),[]),c.a.createElement("div",null,c.a.createElement(d,{errorMessage:D}),c.a.createElement("h2",null,"Phonebook"),c.a.createElement("h3",null,"Add Entry"),c.a.createElement(f,{onSubmit:function(e){if(e.preventDefault(),""!==h)if(t.map((function(e){return e.name})).includes(h))window.confirm("The name ".concat(h," is already present in the phonebook.\nDo you want to update the number?"))&&(y(t.filter((function(e){return e.name===h}))[0],S).then((function(e){0!==e?(L("An error occured while contacting the server.\nPlease try again."),setTimeout((function(){L(null)}),3e3)):(L("Successfully updated number."),setTimeout((function(){L(null)}),2e3))})),r(t.map((function(e){return e.name!==h?e:Object(u.a)({},e,{number:S})}))),p(""),j(""));else{var n={name:h,number:S};g(n).then((function(e){0!==e?(L("An error occured while contacting the server.\nPlease try again."),setTimeout((function(){L(null)}),3e3)):(L("Successfully added entry."),setTimeout((function(){L(null)}),2e3))})),r(t.concat(n)),p(""),j("")}else alert("You must enter a name")},fields:[{description:"name",value:h,onChange:function(e){p(e.target.value)}},{description:"number",value:S,onChange:function(e){j(e.target.value)}}]}),c.a.createElement("h3",null,"Search"),c.a.createElement("input",{value:P,onChange:function(e){k(e.target.value)}}),c.a.createElement(m,{persons:t,searchString:P,deletePerson:x}),c.a.createElement("h3",null,"Numbers"),c.a.createElement(s,{persons:t,deletePerson:x}))};a.a.render(c.a.createElement(O,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.f64c056e.chunk.js.map