{"ast":null,"code":"import _objectSpread from\"/Users/plotner/git/HelsinkiFullStackExercises/part3/notes-v2/part3-notes/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/plotner/git/HelsinkiFullStackExercises/part3/notes-v2/part3-notes/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import noteService from'./services/notes';import Note from'./components/Note';import Notification from'./components/Notification';var App=function App(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),notes=_useState2[0],setNotes=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newNote=_useState4[0],setNewNote=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),showAll=_useState6[0],setShowAll=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),errorMessage=_useState8[0],setErrorMessage=_useState8[1];useEffect(function(){console.log('@effect');noteService.getAll().then(function(response){console.log('promise fulfilled');setNotes(response.data);}).catch(function(error){console.log('Error in get: ',error);setErrorMessage(\"Error encoutered while retrieved notes from server.\\nPlease reload the page and try again.\");setTimeout(function(){setErrorMessage(null);},3000);});},[]);var notesToShow=showAll?notes:notes.filter(function(note){return note.important;});var toggleImportanceOf=function toggleImportanceOf(id){var note=notes.find(function(n){return n.id===id;});var changedNote=_objectSpread({},note,{important:!note.important});noteService.update(id,changedNote).then(function(response){setNotes(notes.map(function(note){return note.id!==id?note:response.data;}));}).catch(function(error){console.log('Error in update: ',error);setErrorMessage(\"Error encoutered while retrieved updating note in server.\\nPlease reload the page and try again.\");setTimeout(function(){setErrorMessage(null);},3000);});};var rows=function rows(){return notesToShow.map(function(note){return React.createElement(Note,{key:note.id,note:note,toggleImportance:function toggleImportance(){return toggleImportanceOf(note.id);}});});};var handleNoteChange=function handleNoteChange(event){setNewNote(event.target.value);};var addNote=function addNote(event){event.preventDefault();var noteObject={content:newNote,date:new Date().toISOString(),important:Math.random()>0.5,id:notes.length+1};noteService.create(noteObject).then(function(response){setNotes(notes.concat(response.data));setNewNote('');}).catch(function(error){console.log('Error in create: ',error);setErrorMessage(\"Error encoutered while retrieved adding note to server.\\nPlease reload the page and try again.\");setTimeout(function(){setErrorMessage(null);},3000);});setNotes(notes.concat(noteObject));setNewNote('');};return React.createElement(\"div\",null,React.createElement(\"h1\",null,\"Notes\"),React.createElement(Notification,{message:errorMessage}),React.createElement(\"div\",null,React.createElement(\"button\",{onClick:function onClick(){return setShowAll(!showAll);}},\"show \",showAll?'important':'all')),React.createElement(\"ul\",null,rows()),React.createElement(\"form\",{onSubmit:addNote},React.createElement(\"input\",{value:newNote,onChange:handleNoteChange}),React.createElement(\"button\",{type:\"submit\"},\"save\")));};export default App;","map":{"version":3,"sources":["/Users/plotner/git/HelsinkiFullStackExercises/part3/notes-v2/part3-notes/src/App.js"],"names":["React","useState","useEffect","noteService","Note","Notification","App","props","notes","setNotes","newNote","setNewNote","showAll","setShowAll","errorMessage","setErrorMessage","console","log","getAll","then","response","data","catch","error","setTimeout","notesToShow","filter","note","important","toggleImportanceOf","id","find","n","changedNote","update","map","rows","handleNoteChange","event","target","value","addNote","preventDefault","noteObject","content","date","Date","toISOString","Math","random","length","create","concat"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport noteService from './services/notes'\nimport Note from './components/Note'\n\nimport Notification from './components/Notification'\nconst App = (props) => {\n  const [notes, setNotes] = useState([]) \n  const [newNote, setNewNote] = useState('') \n  const [showAll, setShowAll] = useState(true)\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  useEffect(() => {\n    console.log('@effect')\n    noteService\n      .getAll()\n      .then(response => {\n        console.log('promise fulfilled')\n        setNotes(response.data)\n      })\n      .catch(error => {\n        console.log('Error in get: ',error)\n        setErrorMessage(\n          `Error encoutered while retrieved notes from server.\\nPlease reload the page and try again.`\n        )\n        setTimeout(() => {\n          setErrorMessage(null)\n        },3000)\n      })\n      \n    },[])\n\n  const notesToShow = showAll\n    ? notes\n    : notes.filter(note => note.important)\n  \n  const toggleImportanceOf = id => {\n    const note = notes.find(n => n.id === id)\n    const changedNote = { ...note, important: !note.important }\n    noteService\n      .update(id, changedNote)\n      .then(response => {\n        setNotes(notes.map(note => note.id !== id ? note : response.data))\n      })\n      .catch(error => {\n        console.log('Error in update: ',error)\n        setErrorMessage(\n          `Error encoutered while retrieved updating note in server.\\nPlease reload the page and try again.`\n        )\n        setTimeout(() => {\n          setErrorMessage(null)\n        },3000)\n      })\n  }\n  const rows = () => notesToShow.map(note =>\n    <Note\n      key={note.id}\n      note={note}\n      toggleImportance={() => toggleImportanceOf(note.id)}\n    />\n  )\n  \n  const handleNoteChange = (event) => {\n    setNewNote(event.target.value)\n  }\n\n  const addNote = (event) => {\n    event.preventDefault()\n\n    const noteObject = {\n      content: newNote,\n      date: new Date().toISOString(),\n      important: Math.random() > 0.5,\n      id: notes.length + 1,\n    }\n    noteService\n      .create(noteObject)\n      .then(response => {\n        setNotes(notes.concat(response.data))\n        setNewNote('')\n      })\n      .catch(error => {\n        console.log('Error in create: ',error)\n        setErrorMessage(\n          `Error encoutered while retrieved adding note to server.\\nPlease reload the page and try again.`\n        )\n        setTimeout(() => {\n          setErrorMessage(null)\n        },3000)\n      })\n\n    setNotes(notes.concat(noteObject))\n    setNewNote('')\n  }\n\n  return (\n    <div>\n      <h1>Notes</h1>\n      <Notification message={errorMessage} />\n      <div>\n        <button onClick={() => setShowAll(!showAll)}>\n          show {showAll ? 'important' : 'all'}\n        </button>\n      </div>\n      <ul>\n        {rows()}\n      </ul>\n      <form onSubmit={addNote}>\n        <input\n          value={newNote} \n          onChange={handleNoteChange}\n        />\n        <button type=\"submit\">save</button>\n      </form>\n    </div>\n  )\n}\n\nexport default App "]},"metadata":{},"sourceType":"module"}